<!doctype html>
<html lang="en">
  <head>
    ${require('./include/_meta.html')}

    <script>
      (function (d) {
        var config = {
            kitId: "adw8piw",
            scriptTimeout: 3000,
            async: true,
          },
          h = d.documentElement,
          t = setTimeout(function () {
            h.className =
              h.className.replace(/\bwf-loading\b/g, "") + " wf-inactive";
          }, config.scriptTimeout),
          tk = d.createElement("script"),
          f = false,
          s = d.getElementsByTagName("script")[0],
          a;
        h.className += " wf-loading";
        tk.src = "https://use.typekit.net/" + config.kitId + ".js";
        tk.async = true;
        tk.onload = tk.onreadystatechange = function () {
          a = this.readyState;
          if (f || (a && a != "complete" && a != "loaded")) return;
          f = true;
          clearTimeout(t);
          try {
            Typekit.load(config);
          } catch (e) {}
        };
        s.parentNode.insertBefore(tk, s);
      })(document);
    </script>
  </head>
  <body>

     <div class="container">
      <div class="year_changer">
        <ul>
          <li class="year_btn" data-year="year_one">
            <button>1</button>
          </li>
          <li class="year_btn" data-year="year_two">
            <button>2</button>
          </li>
          <li class="year_btn" data-year="year_three">
            <button>2</button>
          </li>
        </ul>
      </div>
      <!-- one -->
      <div class="year_area year_list" id="year_one">
        <section class="img_mover">
     
        </section>
        <section class="all_year_wrapper">
          <div class="year_num_wrap">
            <div class="change_year">2024</div>
          </div>
          <div class="fix_list">
            <div class="year_wrap active">
              <div class="year_num">2024</div>
              <ul>
                <li class="txt_item">
                  <span>03</span>
                  <span>2024 대구건축박람회 참가, 32th 순천 오픈 하우스 개최</span>
                </li>
                <li class="txt_item">
                  <span>02</span>
                  <span>31th 경남 김해시 오픈하우스 개최</span>
                </li>
                <li class="txt_item">
                  <span>02</span>
                  <span>30th 전남 담양군 오픈하우스 개최</span>
                </li>
              </ul>
            </div>
            <div class="year_wrap">
              <div class="year_num">2023</div>
              <ul>
                <li class="txt_item">
                  <span>12</span>
                  <span>29th 충북 제천시 오픈하우스 개최</span>
                </li>
                <li class="txt_item">
                  <span>09</span>
                  <span>2023 대구 경향하우징페어 참가</span>
                </li>
                <li class="txt_item">
                  <span>09</span>
                  <span>28th 경기도 이천시 오픈하우스 개최</span>
                </li>
              </ul>
            </div>
            <div class="year_wrap">
              <div class="year_num">2022</div>
              <ul>
                <li class="txt_item">
                  <span>03</span>
                  <span>2022 대구건축박람회 참가, 32th 순천 오픈 하우스 개최</span>
                </li>
                <li class="txt_item">
                  <span>02</span>
                  <span>2022 대구건축박람회 참가, 32th 순천 오픈 하우스 개최</span>
                </li>
                <li class="txt_item">
                  <span>02</span>
                  <span>2022 대구건축박람회 참가, 32th 순천 오픈 하우스 개최</span>
                </li>
              </ul>
            </div>
            <div class="year_wrap">
              <div class="year_num">2021</div>
              <ul>
                <li class="txt_item">
                  <span>03</span>
                  <span>2024 대구건축박람회 참가, 32th 순천 오픈 하우스 개최</span>
                </li>
                <li class="txt_item">
                  <span>02</span>
                  <span>2024 대구건축박람회 참가, 32th 순천 오픈 하우스 개최</span>
                </li>
                <li class="txt_item">
                  <span>02</span>
                  <span>2024 대구건축박람회 참가, 32th 순천 오픈 하우스 개최</span>
                </li>
              </ul>
            </div>
            <div class="year_wrap">
              <div class="year_num">2020</div>
              <ul>
                <li class="txt_item">
                  <span>03</span>
                  <span>2024 대구건축박람회 참가, 32th 순천 오픈 하우스 개최</span>
                </li>
                <li class="txt_item">
                  <span>02</span>
                  <span>2024 대구건축박람회 참가, 32th 순천 오픈 하우스 개최</span>
                </li>
                <li class="txt_item">
                  <span>02</span>
                  <span>2024 대구건축박람회 참가, 32th 순천 오픈 하우스 개최</span>
                </li>
              </ul>
            </div>
          </div>
        </section>
      </div>
      <!-- two -->
      <div class="year_area_2 year_list" id="year_two">
        <section class="img_mover">
        </section>
        <section class="all_year_wrapper">
          <div class="year_num_wrap">
            <div class="change_year">2019</div>
          </div>
          <div class="fix_list">
            <div class="year_wrap">
              <div class="year_num">2019</div>
              <ul>
                <li class="txt_item">
                  <span>03</span>
                  <span>2022 대구건축박람회 참가, 32th 순천 오픈 하우스 개최</span>
                </li>
                <li class="txt_item">
                  <span>02</span>
                  <span>2022 대구건축박람회 참가, 32th 순천 오픈 하우스 개최</span>
                </li>
                <li class="txt_item">
                  <span>02</span>
                  <span>2022 대구건축박람회 참가, 32th 순천 오픈 하우스 개최</span>
                </li>
              </ul>
            </div>
            <div class="year_wrap">
              <div class="year_num">2018</div>
              <ul>
                <li class="txt_item">
                  <span>03</span>
                  <span>2022 대구건축박람회 참가, 32th 순천 오픈 하우스 개최</span>
                </li>
                <li class="txt_item">
                  <span>02</span>
                  <span>2022 대구건축박람회 참가, 32th 순천 오픈 하우스 개최</span>
                </li>
                <li class="txt_item">
                  <span>02</span>
                  <span>2022 대구건축박람회 참가, 32th 순천 오픈 하우스 개최</span>
                </li>
              </ul>
            </div>
            <div class="year_wrap">
              <div class="year_num">2017</div>
              <ul>
                <li class="txt_item">
                  <span>03</span>
                  <span>2022 대구건축박람회 참가, 32th 순천 오픈 하우스 개최</span>
                </li>
                <li class="txt_item">
                  <span>02</span>
                  <span>2022 대구건축박람회 참가, 32th 순천 오픈 하우스 개최</span>
                </li>
                <li class="txt_item">
                  <span>02</span>
                  <span>2022 대구건축박람회 참가, 32th 순천 오픈 하우스 개최</span>
                </li>
              </ul>
            </div>
          </div>
        </section>
      </div>
      <!-- three -->
      <div class="year_area_3 year_list" id="year_three">
        <section class="img_mover">
        </section>
        <section class="all_year_wrapper">
          <div class="year_num_wrap">
            <div class="change_year">2015</div>
          </div>
          <div class="fix_list">
            <div class="year_wrap">
              <div class="year_num">2015</div>
              <ul>
                <li class="txt_item">
                  <span>03</span>
                  <span>2022 대구건축박람회 참가, 32th 순천 오픈 하우스 개최</span>
                </li>
                <li class="txt_item">
                  <span>02</span>
                  <span>2022 대구건축박람회 참가, 32th 순천 오픈 하우스 개최</span>
                </li>
                <li class="txt_item">
                  <span>02</span>
                  <span>2022 대구건축박람회 참가, 32th 순천 오픈 하우스 개최</span>
                </li>
              </ul>
            </div>
            <div class="year_wrap">
              <div class="year_num">2014</div>
              <ul>
                <li class="txt_item">
                  <span>03</span>
                  <span>2022 대구건축박람회 참가, 32th 순천 오픈 하우스 개최</span>
                </li>
                <li class="txt_item">
                  <span>02</span>
                  <span>2022 대구건축박람회 참가, 32th 순천 오픈 하우스 개최</span>
                </li>
                <li class="txt_item">
                  <span>02</span>
                  <span>2022 대구건축박람회 참가, 32th 순천 오픈 하우스 개최</span>
                </li>
              </ul>
            </div>
            <div class="year_wrap">
              <div class="year_num">2005</div>
              <ul>
                <li class="txt_item">
                  <span>03</span>
                  <span>2022 대구건축박람회 참가, 32th 순천 오픈 하우스 개최</span>
                </li>
                <li class="txt_item">
                  <span>02</span>
                  <span>2022 대구건축박람회 참가, 32th 순천 오픈 하우스 개최</span>
                </li>
                <li class="txt_item">
                  <span>02</span>
                  <span>2022 대구건축박람회 참가, 32th 순천 오픈 하우스 개최</span>
                </li>
              </ul>
            </div>
          </div>
        </section>
      </div>
  
      <h1 class="header_section">That's it!</h1>
    </div>

     </div>
    ${require('./include/_footer.html')}
    
    <script>
      // console.clear();

      const yearLists = document.querySelectorAll(".year_list");

      const year_num_wrap = document.querySelector(".year_num_wrap");
      const change_year = document.querySelector(".change_year");
      const yearWrapper = document.querySelector(".all_year_wrapper");
      const yearWrapper2 = document.querySelector(".all_year_wrapper");
      const yearNumWrap = document
        .querySelector(".year_list#year_one")
        .querySelector(".all_year_wrapper .year_num_wrap");
      const yearNumWrap2 = document
        .querySelector(".year_list#year_two")
        .querySelector(".all_year_wrapper .year_num_wrap");

      const createScrollTrigger = (id) => {
        return ScrollTrigger.create({
          trigger: document
            .querySelector(id)
            .querySelector(".all_year_wrapper .year_num_wrap"),
          start: "-30px top",
          end: `+=${document.querySelector(id).querySelector(".fix_list").offsetHeight - _wrapHeight}`,
          scrub: 1,
          pin: true,
          pinSpacing: false,
          onUpdate: () => {
            const list = document
              .querySelector(id)
              .querySelector(".fix_list")
              .querySelectorAll(".year_wrap");
            const yearWrapper = document
              .querySelector(id)
              .querySelector(".all_year_wrapper");
            const yearNumWrapper = document
              .querySelector(id)
              .querySelector(".all_year_wrapper .year_num_wrap");
            const change_year = document
              .querySelector(id)
              .querySelector(".change_year");

            list.forEach((item) => {
              const ItemRect = item.getBoundingClientRect();
              const wrapperRect2 = document
                .querySelector(id)
                .querySelector(".all_year_wrapper");
              const itemTop = wrapperRect2.offsetTop + item.offsetTop;

              if (
                window.scrollY -
                  yearWrapper.offsetTop +
                  yearNumWrapper.offsetHeight / 2 >
                item.offsetTop
              ) {
                const nextYear = item.querySelector(".year_num").textContent;
                item.classList.add("active");
                change_year.textContent = nextYear;
              } else {
                item.classList.remove("active");
              }
            });
          },
        });
      };

      yearLists.forEach((yearArea, idx) => {
        const scrollTriggerYearArea = ScrollTrigger.create({
          trigger: yearArea,
          start: "top top",
          end: "bottom bottom",
          onUpdate: () => {
            if (window.scrollY > yearArea.offsetTop) {
              const yearId = yearArea.id;
              const btns = document.querySelectorAll(".year_btn");
              _currentIdx = idx;
              btns.forEach((btn) => {
                if (btn.getAttribute("data-year") === yearId) {
                  btn.classList.add("active");
                } else {
                  btn.classList.remove("active");
                }
              });
            }
          },
        });
      });

      const _wrapHeight = 250;

      // Set up our scroll trigger
      const ST = createScrollTrigger(".year_list#year_one");
      const ST2 = createScrollTrigger(".year_list#year_two");
      const ST3 = createScrollTrigger(".year_list#year_three");

      // const media = window.matchMedia("screen and (max-width: 600px)");
      // ScrollTrigger.addEventListener("refreshInit", checkSTState);
      // checkSTState();

      // function checkSTState() {
      //     if (media.matches) {
      //         console.log("disable")
      //         ST.disable();
      //     } else {
      //         ST.enable();

      //     }
      // }
    </script>
  </body>
</html>
